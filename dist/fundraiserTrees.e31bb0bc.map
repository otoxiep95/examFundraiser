{"version":3,"sources":["index.js"],"names":["user_endpoint","main","document","querySelector","registerForm","addEventListener","e","preventDefault","console","log","elements","newUserData","firstname","ifirstname","value","lastname","ilastname","username","iusername","email","iemail","password","ipassword","date","Date","toDateString","checkUsername","userTaken","fetch","then","res","json","data","forEach","user","createUser","loginForm","verifyUser","userValid","id","window","location","method","body","JSON","stringify","headers","Accept","d"],"mappings":"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","file":"fundraiserTrees.e31bb0bc.map","sourceRoot":"..","sourcesContent":["\"use strict\";\r\n\r\nlet user_endpoint = \"https://5bfd357c827c3800139ae907.mockapi.io/treefund/user\";\r\n\r\nlet main = document.querySelector(\"main\");\r\nlet registerForm = document.querySelector(\".register-form\");\r\nregisterForm.addEventListener(\"submit\", e => {\r\n  e.preventDefault();\r\n  console.log(e);\r\n  console.log(registerForm.elements);\r\n  const newUserData = {\r\n    firstname: registerForm.elements.ifirstname.value,\r\n    lastname: registerForm.elements.ilastname.value,\r\n    username: registerForm.elements.iusername.value,\r\n    email: registerForm.elements.iemail.value,\r\n    password: registerForm.elements.ipassword.value,\r\n    date: new Date().toDateString()\r\n  };\r\n  checkUsername(registerForm.elements.iusername.value);\r\n  function checkUsername(username) {\r\n    let userTaken = false;\r\n    fetch(user_endpoint)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        console.log(data);\r\n        data.forEach(user => {\r\n          if (user.username === username) {\r\n            console.log(\"found\");\r\n            userTaken = true;\r\n          }\r\n        });\r\n      });\r\n\r\n    if (!userTaken) {\r\n      createUser(newUserData);\r\n    } else {\r\n      console.log(\"username taken please choose another one\");\r\n    }\r\n  }\r\n});\r\n\r\nlet loginForm = document.querySelector(\".login-form\");\r\nloginForm.addEventListener(\"submit\", e => {\r\n  e.preventDefault();\r\n\r\n  console.log(loginForm.elements);\r\n\r\n  verifyUser(\r\n    loginForm.elements.username.value,\r\n    loginForm.elements.password.value\r\n  );\r\n});\r\n\r\nfunction verifyUser(username, password) {\r\n  let userValid = false;\r\n  fetch(user_endpoint)\r\n    .then(res => res.json())\r\n    .then(data => {\r\n      console.log(username, password);\r\n      console.log(data);\r\n\r\n      data.forEach(user => {\r\n        //verify if there is usernamer\r\n        if (user.username === username) {\r\n          console.log(\"found\");\r\n          console.log(user.password);\r\n          //within this verify if the password matches\r\n          if (user.password === password) {\r\n            userValid = true;\r\n            console.log(\"go to user profile id:\" + user.id);\r\n            window.location = \"subpage.html?id=\" + user.id;\r\n          }\r\n        }\r\n      });\r\n      console.log(userValid);\r\n      //return userValid;\r\n    });\r\n}\r\n\r\nfunction createUser(newUserData) {\r\n  fetch(user_endpoint, {\r\n    method: \"post\",\r\n    body: JSON.stringify(newUserData),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\"\r\n    }\r\n  })\r\n    .then(res => res.json())\r\n    .then(d => {});\r\n}\r\n"]}