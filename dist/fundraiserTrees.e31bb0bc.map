{"version":3,"sources":["index.js"],"names":["user_endpoint","main","document","querySelector","registerForm","addEventListener","e","preventDefault","console","log","elements","newUserData","firstname","ifirstname","value","lastname","ilastname","username","iusername","email","iemail","password","ipassword","donation","category","donationForm","location","trees","Number","treenumber","date","Date","toDateString","checkUsername","userTaken","fetch","then","res","json","data","forEach","user","createUser","loginForm","verifyUser","userValid","id","window","method","body","JSON","stringify","headers","Accept","d"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAEA,IAAIA,aAAa,GAAG,2DAApB;AAEA,IAAIC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAX;AACA,IAAIC,YAAY,GAAGF,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAAnB;AAEAC,YAAY,CAACC,gBAAb,CAA8B,QAA9B,EAAwC,UAAAC,CAAC,EAAI;AAC3CA,EAAAA,CAAC,CAACC,cAAF;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,CAAZ;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYL,YAAY,CAACM,QAAzB;AACA,MAAMC,WAAW,GAAG;AAClBC,IAAAA,SAAS,EAAER,YAAY,CAACM,QAAb,CAAsBG,UAAtB,CAAiCC,KAD1B;AAElBC,IAAAA,QAAQ,EAAEX,YAAY,CAACM,QAAb,CAAsBM,SAAtB,CAAgCF,KAFxB;AAGlBG,IAAAA,QAAQ,EAAEb,YAAY,CAACM,QAAb,CAAsBQ,SAAtB,CAAgCJ,KAHxB;AAIlBK,IAAAA,KAAK,EAAEf,YAAY,CAACM,QAAb,CAAsBU,MAAtB,CAA6BN,KAJlB;AAKlBO,IAAAA,QAAQ,EAAEjB,YAAY,CAACM,QAAb,CAAsBY,SAAtB,CAAgCR,KALxB;AAMlBS,IAAAA,QAAQ,EAAE,CACR;AACEC,MAAAA,QAAQ,EAAEC,YAAY,CAACf,QAAb,CAAsBgB,QAAtB,CAA+BZ,KAD3C;AAEEa,MAAAA,KAAK,EAAEC,MAAM,CAACH,YAAY,CAACf,QAAb,CAAsBmB,UAAtB,CAAiCf,KAAlC,CAFf;AAGEgB,MAAAA,IAAI,EAAE,IAAIC,IAAJ,GAAWC,YAAX;AAHR,KADQ,CANQ;AAalBF,IAAAA,IAAI,EAAE,IAAIC,IAAJ,GAAWC,YAAX;AAbY,GAApB;AAeAC,EAAAA,aAAa,CAAC7B,YAAY,CAACM,QAAb,CAAsBQ,SAAtB,CAAgCJ,KAAjC,CAAb;;AACA,WAASmB,aAAT,CAAuBhB,QAAvB,EAAiC;AAC/B,QAAIiB,SAAS,GAAG,KAAhB;AACAC,IAAAA,KAAK,CAACnC,aAAD,CAAL,CACGoC,IADH,CACQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KADX,EAEGF,IAFH,CAEQ,UAAAG,IAAI,EAAI;AACZ/B,MAAAA,OAAO,CAACC,GAAR,CAAY8B,IAAZ;AACAA,MAAAA,IAAI,CAACC,OAAL,CAAa,UAAAC,IAAI,EAAI;AACnB,YAAIA,IAAI,CAACxB,QAAL,KAAkBA,QAAtB,EAAgC;AAC9BT,UAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAyB,UAAAA,SAAS,GAAG,IAAZ;AACD;AACF,OALD;AAMD,KAVH;;AAYA,QAAI,CAACA,SAAL,EAAgB;AACdQ,MAAAA,UAAU,CAAC/B,WAAD,CAAV;AACD,KAFD,MAEO;AACLH,MAAAA,OAAO,CAACC,GAAR,CAAY,0CAAZ;AACD;AACF;AACF,CAxCD;AA0CA,IAAIkC,SAAS,GAAGzC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAhB;AACAwC,SAAS,CAACtC,gBAAV,CAA2B,QAA3B,EAAqC,UAAAC,CAAC,EAAI;AACxCA,EAAAA,CAAC,CAACC,cAAF;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAYkC,SAAS,CAACjC,QAAtB;AAEAkC,EAAAA,UAAU,CACRD,SAAS,CAACjC,QAAV,CAAmBO,QAAnB,CAA4BH,KADpB,EAER6B,SAAS,CAACjC,QAAV,CAAmBW,QAAnB,CAA4BP,KAFpB,CAAV;AAID,CATD;;AAWA,SAAS8B,UAAT,CAAoB3B,QAApB,EAA8BI,QAA9B,EAAwC;AACtC,MAAIwB,SAAS,GAAG,KAAhB;AACAV,EAAAA,KAAK,CAACnC,aAAD,CAAL,CACGoC,IADH,CACQ,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,GADX,EAEGF,IAFH,CAEQ,UAAAG,IAAI,EAAI;AACZ/B,IAAAA,OAAO,CAACC,GAAR,CAAYQ,QAAZ,EAAsBI,QAAtB;AACAb,IAAAA,OAAO,CAACC,GAAR,CAAY8B,IAAZ;AAEAA,IAAAA,IAAI,CAACC,OAAL,CAAa,UAAAC,IAAI,EAAI;AACnB;AACA,UAAIA,IAAI,CAACxB,QAAL,KAAkBA,QAAtB,EAAgC;AAC9BT,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYgC,IAAI,CAACpB,QAAjB,EAF8B,CAG9B;;AACA,YAAIoB,IAAI,CAACpB,QAAL,KAAkBA,QAAtB,EAAgC;AAC9BwB,UAAAA,SAAS,GAAG,IAAZ;AACArC,UAAAA,OAAO,CAACC,GAAR,CAAY,2BAA2BgC,IAAI,CAACK,EAA5C;AACAC,UAAAA,MAAM,CAACrB,QAAP,GAAkB,sBAAsBe,IAAI,CAACK,EAA7C;AACD;AACF;AACF,KAZD;AAaAtC,IAAAA,OAAO,CAACC,GAAR,CAAYoC,SAAZ,EAjBY,CAkBZ;AACD,GArBH;AAsBD;;AAED,SAASH,UAAT,CAAoB/B,WAApB,EAAiC;AAC/BwB,EAAAA,KAAK,CAACnC,aAAD,EAAgB;AACnBgD,IAAAA,MAAM,EAAE,MADW;AAEnBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAexC,WAAf,CAFa;AAGnByC,IAAAA,OAAO,EAAE;AACPC,MAAAA,MAAM,EAAE,kBADD;AAEP,sBAAgB;AAFT;AAHU,GAAhB,CAAL,CAQGjB,IARH,CAQQ,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,GARX,EASGF,IATH,CASQ,UAAAkB,CAAC,EAAI,CAAE,CATf;AAUD","file":"fundraiserTrees.e31bb0bc.map","sourceRoot":"..","sourcesContent":["\"use strict\";\r\n\r\nlet user_endpoint = \"https://5bfd357c827c3800139ae907.mockapi.io/treefund/user\";\r\n\r\nlet main = document.querySelector(\"main\");\r\nlet registerForm = document.querySelector(\".register-form\");\r\n\r\nregisterForm.addEventListener(\"submit\", e => {\r\n  e.preventDefault();\r\n  console.log(e);\r\n  console.log(registerForm.elements);\r\n  const newUserData = {\r\n    firstname: registerForm.elements.ifirstname.value,\r\n    lastname: registerForm.elements.ilastname.value,\r\n    username: registerForm.elements.iusername.value,\r\n    email: registerForm.elements.iemail.value,\r\n    password: registerForm.elements.ipassword.value,\r\n    donation: [\r\n      {\r\n        category: donationForm.elements.location.value,\r\n        trees: Number(donationForm.elements.treenumber.value),\r\n        date: new Date().toDateString()\r\n      }\r\n    ],\r\n    date: new Date().toDateString()\r\n  };\r\n  checkUsername(registerForm.elements.iusername.value);\r\n  function checkUsername(username) {\r\n    let userTaken = false;\r\n    fetch(user_endpoint)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        console.log(data);\r\n        data.forEach(user => {\r\n          if (user.username === username) {\r\n            console.log(\"found\");\r\n            userTaken = true;\r\n          }\r\n        });\r\n      });\r\n\r\n    if (!userTaken) {\r\n      createUser(newUserData);\r\n    } else {\r\n      console.log(\"username taken please choose another one\");\r\n    }\r\n  }\r\n});\r\n\r\nlet loginForm = document.querySelector(\".login-form\");\r\nloginForm.addEventListener(\"submit\", e => {\r\n  e.preventDefault();\r\n\r\n  console.log(loginForm.elements);\r\n\r\n  verifyUser(\r\n    loginForm.elements.username.value,\r\n    loginForm.elements.password.value\r\n  );\r\n});\r\n\r\nfunction verifyUser(username, password) {\r\n  let userValid = false;\r\n  fetch(user_endpoint)\r\n    .then(res => res.json())\r\n    .then(data => {\r\n      console.log(username, password);\r\n      console.log(data);\r\n\r\n      data.forEach(user => {\r\n        //verify if there is usernamer\r\n        if (user.username === username) {\r\n          console.log(\"found\");\r\n          console.log(user.password);\r\n          //within this verify if the password matches\r\n          if (user.password === password) {\r\n            userValid = true;\r\n            console.log(\"go to user profile id:\" + user.id);\r\n            window.location = \"myforest.html?id=\" + user.id;\r\n          }\r\n        }\r\n      });\r\n      console.log(userValid);\r\n      //return userValid;\r\n    });\r\n}\r\n\r\nfunction createUser(newUserData) {\r\n  fetch(user_endpoint, {\r\n    method: \"post\",\r\n    body: JSON.stringify(newUserData),\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\"\r\n    }\r\n  })\r\n    .then(res => res.json())\r\n    .then(d => {});\r\n}\r\n"]}